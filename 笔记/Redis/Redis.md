Redis 常用用途

1.记录帖子的点赞数、评论数和点击数（hash）。

2.记录用户的帖子 ID 列表（排序），便于快速显示用户的帖子列表（zset）。

3.记录帖子的标题、摘要、作者和封面信息，用于列表页展示（hash）。

4.记录帖子的点赞用户 ID 列表，评论 ID 列表，用于显示和去重计数（zset）。

5.缓存近期热帖内容（帖子内容的空间占用比较大），减少数据库压力（hash）。

6.记录帖子的相关文章 ID，根据内容推荐相关帖子（list）。

7.如果帖子 ID 是整数自增的，可以使用 Redis 来分配帖子 ID（计数器）。

8.收藏集和帖子之间的关系（zset）。

9.记录热榜帖子 ID 列表、总热榜和分类热榜（zset）。

10.缓存用户行为历史，过滤恶意行为（zset、hash）。



Redis 有 5 种基础数据结构，分别为：string（字符串）、list（列表）、hash（字典）、set（集合）和 zset（有序集合





Redis 的字符串是动态字符串，是可以修改的字符串，内部结构的实现类似于Java 的 Array List，采用预分配冗余空间的方式来减少内存的频繁分配，内部为当前字符串分配的实际空间capacity一般要高于实际字符串长度len。当字符串长度小于1MB时，扩容都是加倍现有的空间。如果字符串长度超过1MB，扩容时一次只会多扩1MB的空间。需要注意的是字符串最大长度为512MB。



Redis 的列表相当于 Java 语言里面的 LinkedList，注意它是链表而不是数组。这意味着 list 的插入和删除操作非常快，时间复杂度为 O（1），但是索引定位很慢，时间复杂度为 O（n）。Redis 的列表结构常用来做异步队列使用。将需要延后处理的任务结构体序列化成字符串，塞进Redis的列表，另一个线程从这个列表中轮询数据进行处理。

Redis 的字典相当于 Java 语言里面的HashMap，如图 1-7 所示，它是无序字典，内部存储了很多键值对。实现结构上与Java 的 Hash Map也是一样的，都是“数组+链表”二维结构